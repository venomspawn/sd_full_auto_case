# Атрибуты заявки на услугу социальной защиты

При создании записи заявки на услугу социальной защиты возможно прикрепить к
ней произвольные атрибуты. Значение любого атрибута является строкой или
значением `nil` (`NULL`).

[Атрибуты](http://gitlab.it.vm/rkis/mfc/wikis/attributes) со следующими
названиями заполняются во время создания записи заявки и никак не используются
бизнес-логикой:
*   `agent_*`;
*   `applicant_*`;
*   `case_creation_place_*`;
*   `issue_*`;
*   `institution_*`;
*   `operator_*`;
*   `passport_*`;
*   `packaging_place_*`;
*   `service_*`;
*   `target_service_*`.

В течение жизненного цикла заявки на неавтоматизированную услугу бизнес-логика
оперирует следующими атрибутами.

*   `case_creation_date` — дата и время создания заявки.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `nil` на `packaging`.

*   `case_id` — идентификатор заявки.

    -   используется функцией `on_responding_stomp_message`.
    -   Выставляется равным идентификатору заявки при изменении состояния
        заявки с `nil` на `smev_sending`.

*   `case_status` — человекочитаемое представление состояния заявки.

    -   Не используется никакой функцией.
    -   Выставляется при изменении состояния заявки.

*   `closed_date` — дата и время выставления статуса `closed`.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `pending` на `closed`, а также с `issuance` на `closed`.

*   `closed_office_mfc_*` (см. таблицы, приведённые выше) — элементы адреса
    офиса оператора, который закрыл заявку.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `pending` на `closed`, а также с `issuance` на
        `closed`.

*   `close_on_reject` — отметка о том, что заявку следует закрыть, если
    результат оказания услуги не будет востребован.

    -   Используется функцией `change_state_to` и механизмом учёта заявок с
        просроченными сроками выдачи результата оказания услуги.
    -   Выставляется функцией `on_responding_stomp_message` при выставлении
        состояния `issuance`.

*   `closed_operator_*` (см. таблицы, приведённые выше) — элементы информации
    об операторе, который закрыл заявку.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `pending` на `closed`, а также с `issuance` на
        `closed`.

*   `issuance_office_mfc_*` (см. таблицы, приведённые выше) — элементы адреса
    офиса оператора, который перевёл заявку на выдачу результата.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `processing` на `issuance`.

*   `issuance_operator_*` (см. таблицы, приведённые выше) — элементы информации
    об операторе, который перевёл заявку на выдачу результата.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `processing` на `issuance`.

*   `issuance_receiving_date` — дата и время выставления статуса `issuance`.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `processing` на `issuance`.

*   `pending_register_institution_name` — название ведомства, в которое
    отправляется реестр передаваемой корреспонденции с документами заявки.

    -   Не используется никакой функцией.
    -   Выставляется соответственно значению параметра при изменении
        состояния заявки с `packaging` на `pending`.

*   `pending_register_institution_office_*` (см. таблицы, приведённые выше) —
    элементы адреса офиса ведомства, в которое отправляется реестр передаваемой
    корреспонденции с документами заявки.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `packaging` на `pending`.

*   `pending_register_number` — номер реестра передаваемой корреспонденции с
    документами заявки.

    -   Не используется никакой функцией.
    -   Выставляется соответственно значению параметра при изменении состояния
        заявки с `packaging` на `pending`.

*   `pending_register_operator_*` (см. таблицы, приведённые выше) — элементы
    информации об операторе, который отправил документы заявки в реестр
    передаваемой корреспонденции.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `packaging` на `pending`.

*   `pending_register_sending_date` — дата и время отправки документов заявки в
    реестр передаваемой корреспонденции.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `packaging` на `pending`.
    -   Выставляется равным `nil` при изменении состояния заявки с `pending` на
        `packaging`.

*   `pending_rejecting_register_institution_name` — название ведомства, в
    которое отправляется реестр передаваемой корреспонденции с невостребованным
    результатом оказания услуги.

    -   Не используется никакой функцией.
    -   Выставляется соответственно значению параметра при изменении
        состояния заявки с `rejecting` на `pending`.

*   `pending_rejecting_register_institution_office_*` (см. таблицы, приведённые
    выше) — элементы адреса офиса ведомства, в которое отправляется реестр
    передаваемой корреспонденции с невостребованным результатом оказания
    услуги.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `rejecting` на `pending`.

*   `pending_rejecting_register_number` — номер реестра передаваемой
    корреспонденции с невостребованным результатом оказания услуги.

    -   Не используется никакой функцией.
    -   Выставляется соответственно значению параметра при изменении состояния
        заявки с `rejecting` на `pending`.

*   `pending_rejecting_register_operator_*` (см. таблицы, приведённые выше) —
    элементы информации об операторе, который отправил невостребованный
    результат оказания услуги в реестр передаваемой корреспонденции.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `rejecting` на `pending`.

*   `pending_rejecting_register_sending_date` — дата и время отправки
    невостребованного результата оказания услуги в реестр передаваемой
    корреспонденции.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `packaging` на `pending`.
    -   Выставляется равным `nil` при изменении состояния заявки с `pending` на
        `rejecting`.

*   `planned_issuance_date` — плановая дата выдачи результата оказания услуги.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для заполнения атрибута `planned_finish_date`.
    -   Выставляется при создании записи заявки.

*   `planned_issuance_finish_date` — плановая дата, после которой результат
    оказания услуги должен отправляться на возврат в ведомство.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для заполнения атрибута `planned_finish_date`.
    -   Выставляется при создании записи заявки.

*   `planned_receiving_date` — плановая дата получения результата оказания
    услуги из ведомства.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для заполнения атрибута `planned_finish_date`.
    -   Выставляется при создании записи заявки.

*   `planned_sending_date` — плановая дата отправки документов заявки в
    ведомство.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для заполнения атрибута `planned_finish_date`.
    -   Выставляется при создании записи заявки.

*   `planned_rejecting_date` — плановая дата возврата невостребованного
    результата оказания услуги.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для проверки того, можно ли изменить состояние заявки с
        `issuance` на `closed`, а также с `issuance` на `rejecting`.
    -   Выставляется при создании записи заявки.

*   `planned_rejecting_finish_date` — плановая дата, после которой возврат
    результата оказания услуги должен считаться просроченным.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Используется для заполнения атрибута `planned_finish_date`.
    -   Выставляется при создании записи заявки.

*   `planned_finish_date` — плановая максимальная дата текущего этапа оказания
    услуги.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДД`.
    -   Не используется никакой функцией.
    -   Выставляется при изменении состояния заявки.

*   `processing_office_mfc_*` (см. таблицы, приведённые выше) — элементы адреса
    офиса оператора, который отправил документы заявки в ведомство.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `pending` на `processing`.

*   `processing_operator_*` (см. таблицы, приведённые выше) — элементы
    информации об операторе, который отправил документы заявки в ведомство.

    -   Не используется никакой функцией.
    -   Выставляются соответственно значениям параметров при изменении
        состояния заявки с `pending` на `processing`.

*   `processing_sending_date` — дата и время выставления статуса `processing`.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `pending` на `processing`.

*   `rejecting_date` — дата и время выставления статуса `rejecting`.

    -   Формат значения — ISO 8601 `ГГГГ-ММ-ДДТЧЧ:ММ:СС`.
    -   Не используется никакой функцией.
    -   Выставляется равным текущим дате и времени при изменении состояния
        заявки с `issuance` на `rejecting`.

*   `result_id` — идентификатор результата оказания неавтоматизированной
    услуги, на которую была подана заявка.

    -   Не используется никакой функцией.
    -   Выставляется равным значению параметра `result_id` ассоциативного
        массива параметров при изменении состояния заявки с `processing` на
        `issuance`.

*   `service_id` — идентификатор сервиса в запросе к адаптеру СМЭВ 3.

    -   Используется функциями `on_case_creation` и
        `on_responding_stomp_message`.
    -   Не выставляется никакой функцией, должен быть задан при создании
        заявки.

*   `special_data` — информация для запроса к адаптеру СМЭВ 3.

    -   Используется функциями `on_case_creation` и
        `on_responding_stomp_message`.
    -   Не выставляется никакой функцией, должен быть задан при создании
        заявки.

*   `state` — состояние заявки. Подробнее о поддерживаемых значениях можно
    прочитать в документе `STATES.md`, посвящённом статусной модели заявки на
    неавтоматизированную услугу.

    -   Используется и выставляется всеми функциями.
